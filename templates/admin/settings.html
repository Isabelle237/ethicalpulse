
{% extends 'admin/admin_base.html' %}

{% block title %}Paramètres système - Ethical Pulse Shield{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="mb-4">Paramètres système</h1>
    
    <div class="row">
        <div class="col-md-3">
            <div class="list-group mb-4">
                <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">Général</a>
                <a href="#security" class="list-group-item list-group-item-action" data-bs-toggle="list">Sécurité</a>
                <a href="#email" class="list-group-item list-group-item-action" data-bs-toggle="list">Email</a>
                <a href="#api" class="list-group-item list-group-item-action" data-bs-toggle="list">API</a>
                <a href="#notifications" class="list-group-item list-group-item-action" data-bs-toggle="list">Notifications</a>
                <a href="#backup" class="list-group-item list-group-item-action" data-bs-toggle="list">Sauvegarde</a>
                <a href="#logs" class="list-group-item list-group-item-action" data-bs-toggle="list">Journaux</a>
                <a href="#license" class="list-group-item list-group-item-action" data-bs-toggle="list">Licence</a>
            </div>
            
            <div class="admin-card card">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">Informations système</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Version</span>
                            <span class="badge bg-primary">2.5.1</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Dernière mise à jour</span>
                            <span>15/04/2025</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Base de données</span>
                            <span class="text-success"><i class="bi bi-check-circle"></i> Connectée</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Services</span>
                            <span class="text-success"><i class="bi bi-check-circle"></i> En ligne</span>
                        </li>
                    </ul>
                    <div class="d-grid gap-2 mt-3">
                        <button class="btn btn-primary" type="button">
                            <i class="bi bi-arrow-repeat"></i> Vérifier les mises à jour
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="tab-content">
                <!-- Paramètres généraux -->
                <div class="tab-pane fade show active" id="general">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Paramètres généraux</h5>
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-3">
                                    <label for="siteName" class="form-label">Nom du site</label>
                                    <input type="text" class="form-control" id="siteName" value="Ethical Pulse Shield">
                                </div>
                                <div class="mb-3">
                                    <label for="siteDescription" class="form-label">Description</label>
                                    <textarea class="form-control" id="siteDescription" rows="2">Plateforme de gestion de la sécurité et des vulnérabilités</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="timezone" class="form-label">Fuseau horaire</label>
                                    <select class="form-select" id="timezone">
                                        <option value="UTC">UTC</option>
                                        <option value="Europe/Paris" selected>Europe/Paris</option>
                                        <option value="Europe/London">Europe/London</option>
                                        <option value="America/New_York">America/New_York</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="dateFormat" class="form-label">Format de date</label>
                                    <select class="form-select" id="dateFormat">
                                        <option value="dd/mm/yyyy" selected>DD/MM/YYYY</option>
                                        <option value="mm/dd/yyyy">MM/DD/YYYY</option>
                                        <option value="yyyy-mm-dd">YYYY-MM-DD</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Options d'interface</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="darkModeOption" checked>
                                        <label class="form-check-label" for="darkModeOption">Activer le mode sombre</label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="animationsOption" checked>
                                        <label class="form-check-label" for="animationsOption">Activer les animations</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="resultsPerPage" class="form-label">Résultats par page</label>
                                    <select class="form-select" id="resultsPerPage">
                                        <option value="10">10</option>
                                        <option value="25" selected>25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="defaultLanguage" class="form-label">Langue par défaut</label>
                                    <select class="form-select" id="defaultLanguage">
                                        <option value="fr" selected>Français</option>
                                        <option value="en">English</option>
                                        <option value="es">Español</option>
                                        <option value="de">Deutsch</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Paramètres de sécurité -->
                <div class="tab-pane fade" id="security">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Paramètres de sécurité</h5>
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-3">
                                    <label class="form-label">Politique de mot de passe</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="passwordComplexity" checked>
                                        <label class="form-check-label" for="passwordComplexity">
                                            Exiger des mots de passe complexes
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="passwordHistory" checked>
                                        <label class="form-check-label" for="passwordHistory">
                                            Empêcher la réutilisation des 5 derniers mots de passe
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="passwordExpiration" class="form-label">Expiration des mots de passe</label>
                                    <select class="form-select" id="passwordExpiration">
                                        <option value="0">Jamais</option>
                                        <option value="30">30 jours</option>
                                        <option value="60">60 jours</option>
                                        <option value="90" selected>90 jours</option>
                                        <option value="180">180 jours</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="sessionTimeout" class="form-label">Expiration de session</label>
                                    <select class="form-select" id="sessionTimeout">
                                        <option value="15">15 minutes</option>
                                        <option value="30" selected>30 minutes</option>
                                        <option value="60">1 heure</option>
                                        <option value="120">2 heures</option>
                                        <option value="240">4 heures</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="maxLoginAttempts" class="form-label">Tentatives de connexion maximales</label>
                                    <input type="number" class="form-control" id="maxLoginAttempts" value="5" min="1" max="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Authentification à deux facteurs</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enable2FA" checked>
                                        <label class="form-check-label" for="enable2FA">
                                            Activer l'authentification à deux facteurs
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="require2FAAdmins" checked>
                                        <label class="form-check-label" for="require2FAAdmins">
                                            Exiger l'authentification à deux facteurs pour les administrateurs
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Protection CSRF</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="csrfProtection" checked>
                                        <label class="form-check-label" for="csrfProtection">Activer la protection CSRF</label>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration e-mail -->
                <div class="tab-pane fade" id="email">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Configuration e-mail</h5>
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-3">
                                    <label for="smtpServer" class="form-label">Serveur SMTP</label>
                                    <input type="text" class="form-control" id="smtpServer" value="smtp.entreprise.com">
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="smtpPort" class="form-label">Port SMTP</label>
                                            <input type="number" class="form-control" id="smtpPort" value="587">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="smtpSecurity" class="form-label">Sécurité</label>
                                            <select class="form-select" id="smtpSecurity">
                                                <option>Aucune</option>
                                                <option>SSL</option>
                                                <option selected>TLS</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="smtpUsername" class="form-label">Nom d'utilisateur SMTP</label>
                                    <input type="text" class="form-control" id="smtpUsername" value="notif@entreprise.com">
                                </div>
                                <div class="mb-3">
                                    <label for="smtpPassword" class="form-label">Mot de passe SMTP</label>
                                    <input type="password" class="form-control" id="smtpPassword" value="••••••••••••">
                                </div>
                                <div class="mb-3">
                                    <label for="defaultSender" class="form-label">Adresse d'expéditeur par défaut</label>
                                    <input type="email" class="form-control" id="defaultSender" value="security-alerts@entreprise.com">
                                </div>
                                <div class="mb-3">
                                    <label for="defaultReplyTo" class="form-label">Adresse de réponse par défaut</label>
                                    <input type="email" class="form-control" id="defaultReplyTo" value="no-reply@entreprise.com">
                                </div>
                                <div class="mb-3">
                                    <button type="button" class="btn btn-outline-secondary me-2">Tester la configuration</button>
                                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                                </div>
                                
                                <hr class="my-4">
                                
                                <h6 class="mb-3">Modèles d'e-mail</h6>
                                <div class="list-group mb-3">
                                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                        Notification d'alerte
                                        <i class="bi bi-chevron-right"></i>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                        Rapport hebdomadaire
                                        <i class="bi bi-chevron-right"></i>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                        Rapport d'incident
                                        <i class="bi bi-chevron-right"></i>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                        Invitation utilisateur
                                        <i class="bi bi-chevron-right"></i>
                                    </a>
                                </div>
                                <button type="button" class="btn btn-outline-primary">
                                    <i class="bi bi-plus-circle me-1"></i> Ajouter un modèle
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration API -->
                <div class="tab-pane fade" id="api">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Configuration API</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle me-2"></i>
                                L'API permet l'intégration avec d'autres systèmes et applications. Gérez ici les clés API et les paramètres d'accès.
                            </div>
                            
                            <h6 class="mb-3">Paramètres généraux de l'API</h6>
                            <form>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableApi" checked>
                                    <label class="form-check-label" for="enableApi">Activer l'API</label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiRateLimit" class="form-label">Limite de requêtes (par minute)</label>
                                            <input type="number" class="form-control" id="apiRateLimit" value="120">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiKeyExpiry" class="form-label">Durée de validité des clés</label>
                                            <select class="form-select" id="apiKeyExpiry">
                                                <option>30 jours</option>
                                                <option selected>90 jours</option>
                                                <option>180 jours</option>
                                                <option>365 jours</option>
                                                <option>Jamais</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableApiLogs" checked>
                                    <label class="form-check-label" for="enableApiLogs">Activer la journalisation détaillée des appels API</label>
                                </div>
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="publicApiDocs">
                                    <label class="form-check-label" for="publicApiDocs">Documentation API publique</label>
                                </div>
                                
                                <button type="submit" class="btn btn-primary mb-4">Enregistrer les paramètres</button>
                            </form>
                            
                            <h6 class="mb-3">Clés API actives</h6>
                            <div class="table-responsive mb-3">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Nom</th>
                                            <th>Clé</th>
                                            <th>Créée le</th>
                                            <th>Expiration</th>
                                            <th>Dernière utilisation</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>SIEM Integration</td>
                                            <td><code>edc5f6g7h8i9j0•••••••••</code></td>
                                            <td>15/02/2025</td>
                                            <td>15/05/2025</td>
                                            <td>03/05/2025</td>
                                            <td><span class="badge bg-success">Actif</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Dashboard externe</td>
                                            <td><code>1a2b3c4d5e6f7g8•••••••••</code></td>
                                            <td>22/01/2025</td>
                                            <td>22/04/2025</td>
                                            <td>01/05/2025</td>
                                            <td><span class="badge bg-success">Actif</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Ancien système</td>
                                            <td><code>9z8y7x6w5v4u3t•••••••••</code></td>
                                            <td>10/11/2024</td>
                                            <td>10/02/2025</td>
                                            <td>05/02/2025</td>
                                            <td><span class="badge bg-danger">Expiré</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button class="btn btn-primary">
                                <i class="bi bi-plus me-1"></i>Générer une nouvelle clé API
                            </button>
                            
                            <hr class="my-4">
                            
                            <h6 class="mb-3">Webhooks</h6>
                            <div class="table-responsive mb-3">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Nom</th>
                                            <th>URL</th>
                                            <th>Événements</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Alertes critiques</td>
                                            <td><code>https://alert-system.example.com/webhook</code></td>
                                            <td>Alertes, Incidents</td>
                                            <td><span class="badge bg-success">Actif</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-pencil"></i></button>
                                                <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Rapport de scan</td>
                                            <td><code>https://reports.example.com/webhook</code></td>
                                            <td>Scans terminés</td>
                                            <td><span class="badge bg-success">Actif</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-pencil"></i></button>
                                                <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button class="btn btn-primary">
                                <i class="bi bi-plus me-1"></i>Ajouter un webhook
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration des notifications -->
                <div class="tab-pane fade" id="notifications">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Configuration des notifications</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-12 col-lg-6">
                                    <h6 class="mb-3">Canaux de notification</h6>
                                    <form>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="emailNotif" checked>
                                            <label class="form-check-label" for="emailNotif">Email</label>
                                        </div>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="smsNotif">
                                            <label class="form-check-label" for="smsNotif">SMS</label>
                                        </div>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="webhookNotif" checked>
                                            <label class="form-check-label" for="webhookNotif">Webhook</label>
                                        </div>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="slackNotif" checked>
                                            <label class="form-check-label" for="slackNotif">Slack</label>
                                        </div>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="browserNotif">
                                            <label class="form-check-label" for="browserNotif">Navigateur</label>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">Niveaux de sévérité à notifier</h6>
                                        <div class="mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="criticalAlert" checked>
                                                <label class="form-check-label" for="criticalAlert">
                                                    <span class="badge bg-danger me-1">Critique</span> Vulnérabilités critiques
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="highAlert" checked>
                                                <label class="form-check-label" for="highAlert">
                                                    <span class="badge bg-warning text-dark me-1">Haute</span> Vulnérabilités importantes
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="mediumAlert" checked>
                                                <label class="form-check-label" for="mediumAlert">
                                                    <span class="badge bg-primary me-1">Moyenne</span> Vulnérabilités moyennes
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="lowAlert">
                                                <label class="form-check-label" for="lowAlert">
                                                    <span class="badge bg-info text-dark me-1">Basse</span> Vulnérabilités faibles
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="infoAlert">
                                                <label class="form-check-label" for="infoAlert">
                                                    <span class="badge bg-secondary me-1">Info</span> Informations
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <h6 class="mt-4 mb-3">Options de regroupement</h6>
                                        <div class="mb-3">
                                            <label for="groupingOption" class="form-label">Regroupement des alertes</label>
                                            <select class="form-select" id="groupingOption">
                                                <option>Aucun regroupement</option>
                                                <option selected>Par type de vulnérabilité</option>
                                                <option>Par cible (hôte/application)</option>
                                                <option>Par niveau de sévérité</option>
                                            </select>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-2">Enregistrer les paramètres</button>
                                    </form>
                                </div>
                                
                                <div class="col-12 col-lg-6">
                                    <h6 class="mb-3">Destinataires des notifications</h6>
                                    <div class="table-responsive mb-3">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Nom / Groupe</th>
                                                    <th>Canaux</th>
                                                    <th>Niveaux</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Équipe Sécurité</td>
                                                    <td>
                                                        <span class="badge bg-secondary me-1">Email</span>
                                                        <span class="badge bg-secondary me-1">Slack</span>
                                                    </td>
                                                    <td>Tous</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-pencil"></i></button>
                                                        <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Direction</td>
                                                    <td>
                                                        <span class="badge bg-secondary me-1">Email</span>
                                                    </td>
                                                    <td>Critique</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-pencil"></i></button>
                                                        <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Équipe Technique</td>
                                                    <td>
                                                        <span class="badge bg-secondary me-1">Email</span>
                                                        <span class="badge bg-secondary me-1">Slack</span>
                                                    </td>
                                                    <td>Haute, Moyenne</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-secondary me-1"><i class="bi bi-pencil"></i></button>
                                                        <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <button class="btn btn-primary mb-4">
                                        <i class="bi bi-plus me-1"></i>Ajouter un destinataire
                                    </button>
                                    
                                    <h6 class="mt-4 mb-3">Heures silencieuses</h6>
                                    <form>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="quietHours" checked>
                                            <label class="form-check-label" for="quietHours">Activer les heures silencieuses</label>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="quietStart" class="form-label">Heure de début</label>
                                                    <input type="time" class="form-control" id="quietStart" value="22:00">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="quietEnd" class="form-label">Heure de fin</label>
                                                    <input type="time" class="form-control" id="quietEnd" value="07:00">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="criticalOverride" class="form-label">Priorités ignorant les heures silencieuses</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="criticalOverride" checked>
                                                <label class="form-check-label" for="criticalOverride">
                                                    <span class="badge bg-danger me-1">Critique</span> Toujours notifier
                                                </label>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration des sauvegardes -->
                <div class="tab-pane fade" id="backup">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Configuration des sauvegardes</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle me-2"></i>
                                Configurez les sauvegardes automatiques pour protéger vos données contre la perte et assurer la continuité des opérations.
                            </div>
                            
                            <form class="mb-4">
                                <div class="mb-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableBackup" checked>
                                    <label class="form-check-label" for="enableBackup">Activer les sauvegardes automatiques</label>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="backupFrequency" class="form-label">Fréquence</label>
                                            <select class="form-select" id="backupFrequency">
                                                <option>Toutes les heures</option>
                                                <option>Toutes les 6 heures</option>
                                                <option selected>Quotidienne</option>
                                                <option>Hebdomadaire</option>
                                                <option>Mensuelle</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="backupTime" class="form-label">Heure de sauvegarde</label>
                                            <input type="time" class="form-control" id="backupTime" value="02:00">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="backupLocation" class="form-label">Emplacement de sauvegarde</label>
                                    <select class="form-select" id="backupLocation">
                                        <option>Local (serveur)</option>
                                        <option>Serveur FTP</option>
                                        <option selected>AWS S3</option>
                                        <option>Google Cloud Storage</option>
                                        <option>Microsoft Azure</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="s3Bucket" class="form-label">Bucket S3</label>
                                    <input type="text" class="form-control" id="s3Bucket" value="ethicalpulse-backups">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="s3Region" class="form-label">Région S3</label>
                                    <select class="form-select" id="s3Region">
                                        <option>us-east-1</option>
                                        <option selected>eu-west-3</option>
                                        <option>eu-central-1</option>
                                        <option>ap-southeast-1</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="retentionPolicy" class="form-label">Politique de conservation</label>
                                    <select class="form-select" id="retentionPolicy">
                                        <option>7 jours</option>
                                        <option selected>30 jours</option>
                                        <option>90 jours</option>
                                        <option>1 an</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3 form-check">
                                    <input class="form-check-input" type="checkbox" id="encryptBackups" checked>
                                    <label class="form-check-label" for="encryptBackups">
                                        Chiffrer les sauvegardes
                                    </label>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">Enregistrer les paramètres</button>
                            </form>
                            
                            <h6 class="mb-3">Historique des sauvegardes</h6>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Taille</th>
                                            <th>Type</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>03/05/2025 02:00</td>
                                            <td>1.2 GB</td>
                                            <td>Complète</td>
                                            <td><span class="badge bg-success">Réussie</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1" title="Télécharger"><i class="bi bi-download"></i></button>
                                                <button class="btn btn-sm btn-outline-secondary me-1" title="Restaurer"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger" title="Supprimer"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>02/05/2025 02:00</td>
                                            <td>1.2 GB</td>
                                            <td>Complète</td>
                                            <td><span class="badge bg-success">Réussie</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1" title="Télécharger"><i class="bi bi-download"></i></button>
                                                <button class="btn btn-sm btn-outline-secondary me-1" title="Restaurer"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger" title="Supprimer"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>01/05/2025 02:00</td>
                                            <td>1.1 GB</td>
                                            <td>Complète</td>
                                            <td><span class="badge bg-success">Réussie</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1" title="Télécharger"><i class="bi bi-download"></i></button>
                                                <button class="btn btn-sm btn-outline-secondary me-1" title="Restaurer"><i class="bi bi-arrow-repeat"></i></button>
                                                <button class="btn btn-sm btn-outline-danger" title="Supprimer"><i class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>30/04/2025 02:00</td>
                                            <td>0 KB</td>
                                            <td>Complète</td>
                                            <td><span class="badge bg-danger">Échouée</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-secondary" title="Voir les logs"><i class="bi bi-file-text"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="d-flex gap-2 mt-3">
                                <button class="btn btn-primary">
                                    <i class="bi bi-plus me-1"></i>Créer une sauvegarde manuelle
                                </button>
                                <button class="btn btn-outline-secondary">
                                    <i class="bi bi-upload me-1"></i>Importer une sauvegarde
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration des journaux -->
                <div class="tab-pane fade" id="logs">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Gestion des journaux</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h6 class="mb-3">Configuration des journaux</h6>
                                    <form>
                                        <div class="mb-3">
                                            <label for="logLevel" class="form-label">Niveau de journalisation</label>
                                            <select class="form-select" id="logLevel">
                                                <option>Debug</option>
                                                <option selected>Info</option>
                                                <option>Warning</option>
                                                <option>Error</option>
                                                <option>Critical</option>
                                            </select>
                                            <div class="form-text">Détermine la quantité d'information enregistrée</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="logRetention" class="form-label">Durée de conservation</label>
                                            <select class="form-select" id="logRetention">
                                                <option>7 jours</option>
                                                <option>30 jours</option>
                                                <option selected>90 jours</option>
                                                <option>1 an</option>
                                                <option>Illimitée</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="logRotation" class="form-label">Politique de rotation</label>
                                            <select class="form-select" id="logRotation">
                                                <option selected>Quotidienne</option>
                                                <option>Hebdomadaire</option>
                                                <option>Par taille (100 MB)</option>
                                                <option>Par taille (500 MB)</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableAuditLogs" checked>
                                            <label class="form-check-label" for="enableAuditLogs">Activer les journaux d'audit</label>
                                        </div>
                                        
                                        <hr class="my-4">
                                        
                                        <h6 class="mb-3">Transfert de journaux</h6>
                                        <div class="mb-3 form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="forwardSyslog" checked>
                                            <label class="form-check-label" for="forwardSyslog">Transférer vers un serveur syslog</label>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="syslogServer" class="form-label">Serveur syslog</label>
                                            <input type="text" class="form-control" id="syslogServer" value="logs.entreprise.com">
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="syslogPort" class="form-label">Port</label>
                                                    <input type="number" class="form-control" id="syslogPort" value="514">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="syslogProtocol" class="form-label">Protocole</label>
                                                    <select class="form-select" id="syslogProtocol">
                                                        <option>UDP</option>
                                                        <option selected>TCP</option>
                                                        <option>TLS</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">Enregistrer les paramètres</button>
                                    </form>
                                </div>
                                
                                <div class="col-md-6">
                                    <h6 class="mb-3">Journaux récents</h6>
                                    <div class="mb-3">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Rechercher dans les journaux...">
                                            <button class="btn btn-outline-secondary" type="button"><i class="bi bi-search"></i></button>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-header bg-light d-flex justify-content-between align-items-center py-2">
                                            <span>Filtres</span>
                                            <button class="btn btn-sm btn-link text-decoration-none">Réinitialiser</button>
                                        </div>
                                        <div class="card-body">
                                            <div class="row g-2">
                                                <div class="col-md-6">
                                                    <select class="form-select form-select-sm">
                                                        <option selected>Tous les niveaux</option>
                                                        <option>Info</option>
                                                        <option>Warning</option>
                                                        <option>Error</option>
                                                        <option>Critical</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <select class="form-select form-select-sm">
                                                        <option selected>Toutes les sources</option>
                                                        <option>Système</option>
                                                        <option>Authentification</option>
                                                        <option>Scan</option>
                                                        <option>API</option>
                                                    </select>
                                                </div>
                                                <div class="col-12">
                                                    <div class="input-group input-group-sm">
                                                        <span class="input-group-text">Période</span>
                                                        <input type="date" class="form-control" value="2025-04-30">
                                                        <span class="input-group-text">à</span>
                                                        <input type="date" class="form-control" value="2025-05-03">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="log-container bg-dark text-light p-3 rounded" style="height: 300px; overflow-y: auto; font-family: monospace; font-size: 0.8rem;">
                                        <div class="log-entry"><span class="text-success">[03/05/2025 09:05:12]</span> <span class="text-info">[INFO]</span> Utilisateur admin connecté depuis 192.168.1.15</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 08:30:05]</span> <span class="text-info">[INFO]</span> Scan de vulnérabilité lancé sur 192.168.1.0/24</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 08:15:22]</span> <span class="text-warning">[WARNING]</span> Tentative de connexion échouée pour l'utilisateur john.doe</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 08:00:00]</span> <span class="text-info">[INFO]</span> Sauvegarde automatique lancée</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 07:45:12]</span> <span class="text-danger">[ERROR]</span> Échec de connexion à la base de données - réessai dans 30s</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 07:45:42]</span> <span class="text-info">[INFO]</span> Connexion à la base de données rétablie</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 07:30:00]</span> <span class="text-info">[INFO]</span> 3 nouvelles vulnérabilités détectées depuis le dernier scan</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 06:15:33]</span> <span class="text-danger">[ERROR]</span> API Rate limit exceeded pour la clé 1a2b3c4d</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 05:22:17]</span> <span class="text-info">[INFO]</span> Configuration système mise à jour par utilisateur admin</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 04:12:05]</span> <span class="text-warning">[WARNING]</span> Utilisation CPU > 85% pendant plus de 5 minutes</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 03:05:45]</span> <span class="text-warning">[WARNING]</span> Tentatives multiples de connexion depuis 203.0.113.42</div>
                                        <div class="log-entry"><span class="text-success">[03/05/2025 02:00:00]</span> <span class="text-info">[INFO]</span> Sauvegarde automatique terminée avec succès (1.2 GB)</div>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between mt-3">
                                        <button class="btn btn-outline-primary">
                                            <i class="bi bi-download me-1"></i>Exporter les journaux
                                        </button>
                                        <button class="btn btn-outline-secondary">
                                            <i class="bi bi-arrow-clockwise me-1"></i>Rafraîchir
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Informations de licence -->
                <div class="tab-pane fade" id="license">
                    <div class="admin-card card">
                        <div class="card-header bg-white">
                            <h5 class="card-title mb-0">Informations de licence</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h6 class="card-subtitle mb-3 text-muted">Détails de licence</h6>
                                            <dl class="row">
                                                <dt class="col-sm-5">Type de licence</dt>
                                                <dd class="col-sm-7">Enterprise</dd>
                                                
                                                <dt class="col-sm-5">Entreprise</dt>
                                                <dd class="col-sm-7">Ethical Security Inc.</dd>
                                                
                                                <dt class="col-sm-5">Contact</dt>
                                                <dd class="col-sm-7">Jean Dupont</dd>
                                                
                                                <dt class="col-sm-5">Email</dt>
                                                <dd class="col-sm-7">jean.dupont@ethicalsecurity.com</dd>
                                                
                                                <dt class="col-sm-5">Date d'émission</dt>
                                                <dd class="col-sm-7">15/01/2025</dd>
                                                
                                                <dt class="col-sm-5">Date d'expiration</dt>
                                                <dd class="col-sm-7 text-primary">15/01/2026</dd>
                                                
                                                <dt class="col-sm-5">ID Matériel</dt>
                                                <dd class="col-sm-7"><code>EP-7890-1234-5678-9012</code></dd>
                                            </dl>
                                            
                                            <div class="d-grid gap-2 mt-3">
                                                <button class="btn btn-primary" type="button">Renouveler la licence</button>
                                                <button class="btn btn-outline-secondary" type="button">Afficher la clé de licence</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-body">
                                            <h6 class="card-subtitle mb-3 text-muted">Paramètres de licence</h6>
                                            
                                            <form>
                                                <div class="mb-3 form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="licenseAlerts" checked>
                                                    <label class="form-check-label" for="licenseAlerts">Alertes d'expiration</label>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="alertDays" class="form-label">Jours avant expiration pour recevoir une alerte</label>
                                                    <input type="number" class="form-control" id="alertDays" value="30" min="1" max="90">
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label for="licenseContact" class="form-label">Contact pour les notifications de licence</label>
                                                    <input type="email" class="form-control" id="licenseContact" value="admin@ethicalsecurity.com">
                                                </div>
                                                
                                                <button type="submit" class="btn btn-primary">Enregistrer les paramètres</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h6 class="card-subtitle mb-3 text-muted">Fonctionnalités incluses</h6>
                                            
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Scan avancé</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Remédiation automatique</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Intégration SIEM</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Rapport personnalisé</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Support prioritaire 24/7</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> API complète</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <span><i class="bi bi-check-circle-fill text-success me-2"></i> Nombre illimité d'actifs</span>
                                                    <span class="badge bg-primary rounded-pill">Premium</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-4">
                                        <div class="card-body">
                                            <h6 class="card-subtitle mb-3 text-muted">Utilisation</h6>
                                            
                                            <h5 class="card-title">Utilisateurs</h5>
                                            <div class="progress mb-3" style="height: 20px;">
                                                <div class="progress-bar" role="progressbar" style="width: 74%;" aria-valuenow="37" aria-valuemin="0" aria-valuemax="50">37/50</div>
                                            </div>
                                            
                                            <h5 class="card-title">Scans mensuels</h5>
                                            <div class="progress mb-3" style="height: 20px;">
                                                <div class="progress-bar" role="progressbar" style="width: 45%;" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100">45/Illimité</div>
                                            </div>
                                            
                                            <h5 class="card-title">Stockage</h5>
                                            <div class="progress mb-3" style="height: 20px;">
                                                <div class="progress-bar" role="progressbar" style="width: 32%;" aria-valuenow="32" aria-valuemin="0" aria-valuemax="100">32 GB/100 GB</div>
                                            </div>
                                            
                                            <hr class="my-4">
                                            
                                            <div class="d-flex justify-content-between align-items-center">
                                                <h6 class="mb-0">Support & Maintenance</h6>
                                                <span class="badge bg-success">Actif jusqu'au 15/01/2026</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
